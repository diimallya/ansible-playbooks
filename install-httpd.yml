--- # Bootstrap webservers
- hosts: all
  become: yes               # If to escalate privilege
  become_method: sudo 
  gather_facts: yes
  tasks:
    - name: install latest httpd
      yum:
        name: httpd
        state: latest
      notify:
        - restart httpd                  # A change in task yum will call the handler restart httpd

    - name: Download http package
      get_url:
        url: https://github.com/diimallya/http-packages/blob/master/new-static.tar.gz
        dest: /tmp/new-static.tar.gz
        mode: 0777

    - name: Extract http package into webserver directory
      shell: mkdir /var/www/html
      shell: cp -r /tmp/new-static.tar.gz /var/www/html/new-static.tar.gz
      shell: tar -xvzf /var/www/html/new-static.tar.gz
      notify:
        - restart httpd

  handlers:
    - name: Attempt to restart httpd
      service:
        name: httpd
        state: restarted
      listen: restart httpd